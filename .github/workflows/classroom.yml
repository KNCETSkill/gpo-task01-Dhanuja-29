name: Java Autograding - Brew Size Advisor

on: [push]

permissions:
  checks: write
  actions: read
  contents: read

jobs:
  autograde:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Setup Java
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'

      - name: Compile
        run: javac src/BrewSizeAdvisor.java

      - name: Run All Test Cases
        run: |
          score=0

          test() {
            input=$1
            expected=$2
            output=$(echo "$input" | java -cp src BrewSizeAdvisor)

            if [ "$output" = "$expected" ]; then
              echo "PASS: Input=$input Output=$output"
              score=$((score+10))
            else
              echo "FAIL: Input=$input Expected=$expected Got=$output"
              exit 1
            fi
          }

          test 220 Medium
          test 400 Large
          test 150 Small
          test 200 Medium
          test 350 Medium

          echo "ðŸŽ¯ TOTAL SCORE: $score / 50"